(()=>{"use strict";console.log("chrome object:",chrome),chrome.runtime.onInstalled.addListener((function(){chrome.storage.sync.set({autoClear:!1})})),chrome.tabs.onUpdated.addListener((function(e,t,o){"complete"===t.status&&o.url&&o.url.includes("webwork")&&chrome.storage.sync.get("autoClear",(function(t){t.autoClear&&chrome.scripting.executeScript({target:{tabId:e},func:function(){var e=!0;"true"===sessionStorage.getItem("webwork_submitted")&&(console.log("Detected post-submission state, skipping auto-clear"),e=!1,sessionStorage.removeItem("webwork_submitted")),e&&(console.log("Auto-clearing WebWork answer fields"),document.querySelectorAll('input[id*="AnSwEr"]').forEach((function(e){e.value=""})),document.querySelectorAll('textarea[id*="AnSwEr"]').forEach((function(e){e.value=""})),document.querySelectorAll('select[id*="AnSwEr"]').forEach((function(e){e.selectedIndex=0})),document.querySelectorAll('input[type="radio"][id*="AnSwEr"]').forEach((function(e){e.checked=!1})),document.querySelectorAll('input[type="checkbox"][id*="AnSwEr"]').forEach((function(e){e.checked=!1}))),document.querySelectorAll('input[type="submit"], button[type="submit"]').forEach((function(e){e.hasAttribute("data-ww-listener")||(e.setAttribute("data-ww-listener","true"),e.addEventListener("click",(function(){sessionStorage.setItem("webwork_submitted","true"),console.log("WebWork submission registered")})))})),document.querySelectorAll("form").forEach((function(e){e.hasAttribute("data-ww-form-listener")||(e.setAttribute("data-ww-form-listener","true"),e.addEventListener("submit",(function(){sessionStorage.setItem("webwork_submitted","true"),console.log("WebWork form submission registered")})))}))}})}))}))})();